{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{273:function(t,s,a){\"use strict\";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"聊聊cookie\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#聊聊cookie\"}},[t._v(\"#\")]),t._v(\" 聊聊Cookie\")]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"Cookie一直是一个很值得探究的话题，也是很多人容易混淆的地方，今天就来探究一番Cookie。\")])]),t._v(\" \"),a(\"p\",[t._v(\"废话少说，直入主题。\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"cookie的工作原理\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#cookie的工作原理\"}},[t._v(\"#\")]),t._v(\" Cookie的工作原理\")]),t._v(\" \"),a(\"p\",[t._v(\"在介绍Cookie之前，我们先来看下Cookie是如何进行工作的：\")]),t._v(\" \"),a(\"ol\",[a(\"li\",[t._v(\"首先，先假设当前域名下是没有Cookie的；\")]),t._v(\" \"),a(\"li\",[t._v(\"接着，当浏览器发送了一个请求给服务器（原则上这个请求是不带Cookie的）；\")]),t._v(\" \"),a(\"li\",[t._v(\"服务器接收到请求后，可以选择性地去设置Cookie响应到客户端；\")]),t._v(\" \"),a(\"li\",[t._v(\"浏览器收到响应后，如果响应中带有Cookie，则将Cookie保存下来；\")]),t._v(\" \"),a(\"li\",[t._v(\"最后，对于客户端接下来的每一次请求，都会带上这些Cookie并发到服务器上；\")])]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"需要注意的一点就是：\")])]),t._v(\" \"),a(\"p\",[t._v(\"在WebStorage出现之前，Cookie被滥用当做了存储工具。什么数据都放在Cookie中，即使这些数据只在页面中使用而不需要传送到服务端中。\")]),t._v(\" \"),a(\"p\",[t._v(\"这是以前存储数据的一个弊端，而Cookie标准还是做了一些限制：\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"每个域名下的Cookie的大小最大为\"),a(\"strong\",[t._v(\"4KB\")]),t._v(\"；\")]),t._v(\" \"),a(\"li\",[t._v(\"每个域名下的Cookie数量最多为\"),a(\"strong\",[t._v(\"20个\")]),t._v(\"（但很多浏览器厂商在具体实现时支持大于20个）；\")])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"cookie的格式\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#cookie的格式\"}},[t._v(\"#\")]),t._v(\" Cookie的格式\")]),t._v(\" \"),a(\"p\",[t._v(\"JS原生的API提供了获取Cookie的方法：\"),a(\"code\",[t._v(\"document.cookie\")]),t._v(\"（Attention：这个方法只能获取非HttpOnly类型的Cookie）。\")]),t._v(\" \"),a(\"p\",[t._v(\"现在就在浏览器上指向上述的代码：\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://7xs89l.com1.z0.glb.clouddn.com/document-cookie.png\",alt:\"document.cookie\"}})]),t._v(\" \"),a(\"p\",[t._v(\"由上图可以看出，Cookie就是由一段字符串组成的，而且格式为：\"),a(\"strong\",[t._v(\"由键值对Key=Value构成，键值对之间由一个分号和一个空格隔开\")])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"实践查看cookie过程\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#实践查看cookie过程\"}},[t._v(\"#\")]),t._v(\" 实践查看cookie过程\")]),t._v(\" \"),a(\"p\",[t._v(\"在开始之前，需要在本地使用Node搭建一个服务器，我们将使用这个服务器来操作Cookie\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-javascript extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[a(\"code\",[t._v(\"    \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 首先打开命令行工具，执行下面一些命令\")]),t._v(\"\\n    mkdir cookie\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),t._v(\"demo \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"&&\")]),t._v(\" cd cookie\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),t._v(\"demo\\n    npm init\\n    npm install express \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"--\")]),t._v(\"save\\n    touch main\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"js\\n\")])])]),a(\"p\",[t._v(\"执行完上面命令后，就会看到如下的文件结构\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-javascript extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[a(\"code\",[t._v(\"    cookie\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),t._v(\"demo\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"|\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),t._v(\" main\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"js\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"|\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),t._v(\" node_modules\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"|\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"package\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"json\\n\")])])]),a(\"p\",[t._v(\"打开main.js，并在main.js写入一下代码：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-javascript extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[a(\"code\",[t._v(\"    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" express \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"require\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'express'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" app \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"express\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \\n    app\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"listen\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"3000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"err\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"err\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"return\")]),t._v(\" console\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"log\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"err\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    app\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"get\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'/'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"req\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"cookie\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'name'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'Andraw_lin'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"send\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'<h1>Hello word!</h1>'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" \\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 并在命令行中执行\")]),t._v(\"\\n    node main\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"js\\n\")])])]),a(\"p\",[t._v(\"在浏览器上打开\"),a(\"code\",[t._v(\"localhost:3000\")])]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"我们看到\"),a(\"code\",[t._v(\"Request Headers\")]),t._v(\"上并没有Cookie这个字段；\")]),t._v(\" \"),a(\"li\",[t._v(\"但是\"),a(\"code\",[t._v(\"Response Headers\")]),t._v(\"则有了Set-Cookie这个字段；\")])]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://7xs89l.com1.z0.glb.clouddn.com/cookie-guocheng0.png\",alt:\"cookie过程1\"}})]),t._v(\" \"),a(\"p\",[t._v(\"从上图可以看出，服务端的头部会有一个\"),a(\"code\",[t._v(\"Set-Cookie\")]),t._v(\"字段；\")]),t._v(\" \"),a(\"p\",[t._v(\"然而，当你重新再刷新页面的时候，你会发现刚刚在服务端设置的cookie，在客户端重新请求服务端时会跟着请求头部上一起发送到服务端上，如下图\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://7xs89l.com1.z0.glb.clouddn.com/cookie-guocheng1.png\",alt:\"cookie过程2\"}})]),t._v(\" \"),a(\"p\",[t._v(\"上图就可以清晰发现在请求的头部多了\"),a(\"code\",[t._v(\"Cookie\")]),t._v(\"字段，当然，无论你再刷新多少次，Cookie字段也还是存在在请求头部；\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"cookie的定义\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#cookie的定义\"}},[t._v(\"#\")]),t._v(\" Cookie的定义\")]),t._v(\" \"),a(\"p\",[t._v(\"看了上面的介绍的Cookie的过程后，这时候大家应该对Cookie有一定的理解，现在就总结如下：\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"Cookie是浏览器储存在用户电脑上的一小段文本文件；\")]),t._v(\" \"),a(\"li\",[t._v(\"Cookie是纯文本格式，不包含任何可执行的代码；\")]),t._v(\" \"),a(\"li\",[t._v(\"Cookie由键值对构成，由分号和空格隔开；\")]),t._v(\" \"),a(\"li\",[t._v(\"Cookie虽然是存储在浏览器，但是通常由服务器端进行设置；\")]),t._v(\" \"),a(\"li\",[t._v(\"Cookie的大小限制在4KB左右，一般情况下，每个域名下的Cookie数量不超过20个；\")])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"cookie的属性选项\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#cookie的属性选项\"}},[t._v(\"#\")]),t._v(\" Cookie的属性选项\")]),t._v(\" \"),a(\"p\",[t._v(\"每个Cookie都有一定的属性，如什么时候失效、要送到哪个域名、哪个路径等等。这些属性都是通过Cookie选项来进行设置，因此Cookie的属性选项主要包括如下：\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"Expries/Max-age;\")]),t._v(\" \"),a(\"li\",[t._v(\"Domain;\")]),t._v(\" \"),a(\"li\",[t._v(\"Path;\")]),t._v(\" \"),a(\"li\",[t._v(\"Secure;\")]),t._v(\" \"),a(\"li\",[t._v(\"HttpOnly;\")])]),t._v(\" \"),a(\"p\",[t._v(\"在设置这些属性时，属性之间需要一个分号和一个空格隔开，代码如下：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-javascript extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[a(\"code\",[t._v(\"    \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"key=name; expires=Thu, 25 Feb 2016 04:18:00 GMT; domain=ppsc.sankuai.com; path=/; secure; HttpOnly\"')]),t._v(\"\\n\")])])]),a(\"ol\",[a(\"li\",[a(\"p\",[t._v(\"Expires/Max-age\")]),t._v(\" \"),a(\"p\",[t._v(\"Expires/Max-age都是控制\"),a(\"strong\",[t._v(\"Cookie失效时刻\")]),t._v(\"的选项。如果没有设置这两个选项，则默认有效期为session，即会话Cookie。这种Cookie在浏览器关闭后就会销毁。\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[t._v(\"Expires\")]),t._v(\" \"),a(\"p\",[t._v(\"expires选项用来设置Cookie什么时间内有效，是一个时间点，expires其实是Cookie失效日期；\")]),t._v(\" \"),a(\"p\",[t._v(\"另外，expires必须是GMT格式的时间（可以通过\"),a(\"code\",[t._v(\"New Date（）.toGMTString（）\")]),t._v(\"或者\"),a(\"code\",[t._v(\"New Date（）.toUTCString（）\")]),t._v(\"来获得）；\")]),t._v(\" \"),a(\"p\",[t._v(\"重新设置一个main.js\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-javascript extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[a(\"code\",[t._v(\"   app\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"get\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'/'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"req\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n      \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 设置Cookie十秒后失效\")]),t._v(\"\\n      res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"cookie\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'name'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'Andraw_lin'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n          expires\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Date\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"Date\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"now\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"100000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \\n      \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n      res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"cookie\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'age'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'23'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n      res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"send\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'<h1>test</h1>'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n   \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),a(\"p\",[t._v(\"执行上述代码后，可以看到\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://7xs89l.com1.z0.glb.clouddn.com/cookie-guocheng20.png\",alt:\"cookie3\"}})]),t._v(\" \"),a(\"p\",[t._v(\"再到Application中去查看两个cookie的过期时间\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://7xs89l.com1.z0.glb.clouddn.com/cookie-guocheng21.png\",alt:\"cookie4\"}})]),t._v(\" \"),a(\"p\",[t._v(\"因此，过了10秒后，再到浏览器的控制台上输出\"),a(\"code\",[t._v(\"document.cookie\")]),t._v(\"，会发现只有一个键值对\"),a(\"code\",[t._v(\"age=23;\")])]),t._v(\" \"),a(\"p\",[t._v('当然以后发送请求也不会带上这个失效的Cookie（即name=\"Andraw_lin\"）')])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"Max-age\")]),t._v(\" \"),a(\"p\",[t._v(\"expires是http/1.0协议中的选项，在新的http/1.1协议中expires已经由max-age选项代替，两者的作用都是\"),a(\"strong\",[t._v(\"限制Cookie的有效时间\")]),t._v(\"。\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"注意：\")]),t._v(\" expires的值是一个时间点（Cookie失效时刻 = expires），而max-age的值是一个以秒为单位时间段（Cookie失效时刻 = 创建时刻 + max-age）\")]),t._v(\" \"),a(\"p\",[t._v(\"另外，需要注意的是，\"),a(\"strong\",[t._v(\"如果同时设置了max-age和expires，则以max-age的时间为准\")]),t._v(\"。\")]),t._v(\" \"),a(\"p\",[t._v(\"重新设置main.js\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-javascript extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[a(\"code\",[t._v(\"   app\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"get\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'/'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"req\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n       res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"cookie\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'name0'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'Andraw_lin'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n       res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"cookie\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'name1'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'Tom'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n           expires\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Date\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"Date\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"now\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"30\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n           maxAge\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"60\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1000\")]),t._v(\"\\n       \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n       res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"cookie\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'name2'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'Jenny'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n           maxAge\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"60\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1000\")]),t._v(\"\\n       \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n       res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"send\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"<h1>hello world!</h1>\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n   \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),a(\"p\",[t._v(\"运行上述代码如下\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://7xs89l.com1.z0.glb.clouddn.com/cookie-guocheng3.png\",alt:\"cookie4\"}})]),t._v(\" \"),a(\"p\",[t._v(\"通过上图可以发现，当同时设置expires和max-age时，浏览器会自动以max-age的时间为准\")])])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"Domain和Path\")]),t._v(\" \"),a(\"p\",[t._v(\"domain是域名，path是路径，两者加起来就构成了URL，domain和path一起来限制Cookie能被哪些URL访问。\")]),t._v(\" \"),a(\"p\",[t._v(\"而domain和path则分别被称为Cookie的作用域和作用路径，如果没有设置两个选项，则会使用默认值。domain的默认值为设置该Cookie的网页所在的域名，path默认值为设置该Cookie的网页所在的目录。\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"注意：\")]),t._v(\" 只要满足作用域和作用路径，请求就会带上Cookie，就算端口号不一样。\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[t._v(\"domain作用域\")]),t._v(\" \"),a(\"p\",[t._v(\"在讨论作用域之前，我们先来对域名做一个简单的了解。\")]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"子域，是相对父域来说的，指域名中的每一个段。各子域之间用小数点分隔开。放在域名最后的子域称为最高级子域，或称为一级域，在它前面的子域称为二级域。\")])]),t._v(\" \"),a(\"p\",[t._v(\"以下图为例，news.163.com和sports.163.com是子域，163.com是父域。\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://7xs89l.com1.z0.glb.clouddn.com/practice-cookie10.png\",alt:\"作用域\"}})]),t._v(\" \"),a(\"p\",[t._v(\"当Cookie的domain为news.163.com，那么访问news.163.com的时候就会带上Cookie；\")]),t._v(\" \"),a(\"p\",[t._v(\"当Cookie的domain为163.com，那么访问news.163.com和sports.163.com就会带上Cookie\")])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"path作用路径\")]),t._v(\" \"),a(\"p\",[t._v(\"当Cookie的domain是相同的情况下，也有是否带上Cookie有一定的规则。\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://7xs89l.com1.z0.glb.clouddn.com/practice-cookie11.png\",alt:\"作用路径\"}})]),t._v(\" \"),a(\"p\",[t._v(\"需要注意的是，\"),a(\"strong\",[t._v(\"在子路径内可以访问到父路径的Cookie，反过来就不行\")]),t._v(\"；\")]),t._v(\" \"),a(\"p\",[t._v(\"看看栗子，先修改main.js\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-javascript extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[a(\"code\",[t._v(\"   app\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"get\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'/parent'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"req\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n       res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"cookie\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'parent-name'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'parent'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n           path\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'/parent'\")]),t._v(\"\\n       \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n       res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"send\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'<h1>父路径</h1>'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"；\\n   \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n   app\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"get\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'/parent/childA'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"req\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n       res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"cookie\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'child-name-A'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'childA'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n           path\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'/parent/childA'\")]),t._v(\"\\n       \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n       res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"send\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'<h1>子路径A</h1>'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"；\\n   \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n   app\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"get\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'/parent/childB'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"req\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=>\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n       res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"cookie\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'child-name-B'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'childB'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n           path\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'/parent/childB'\")]),t._v(\"\\n       \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n       res\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"send\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'<h1>子路径B</h1>'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"；\\n   \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),a(\"p\",[t._v(\"运行上述代码\")]),t._v(\" \"),a(\"p\",[t._v(\"在\"),a(\"code\",[t._v(\"localhost:3000/parent\")]),t._v(\"路径下\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://7xs89l.com1.z0.glb.clouddn.com/cookie-guocheng40.png\",alt:\"cookie4\"}})]),t._v(\" \"),a(\"p\",[t._v(\"在\"),a(\"code\",[t._v(\"localhost:3000/parent/childA\")]),t._v(\"路径下\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://7xs89l.com1.z0.glb.clouddn.com/cookie-guocheng41.png\",alt:\"cookie4\"}})]),t._v(\" \"),a(\"p\",[t._v(\"在\"),a(\"code\",[t._v(\"localhost:3000/parent/childB\")]),t._v(\"路径下\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://7xs89l.com1.z0.glb.clouddn.com/cookie-guocheng42.png\",alt:\"cookie4\"}})])])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"Secure\")]),t._v(\" \"),a(\"p\",[t._v(\"secure选项用来设置Cookie只在确保安全的请求才会发送。\")]),t._v(\" \"),a(\"p\",[t._v(\"需要注意的是，\"),a(\"strong\",[t._v(\"只有当请求是HTTPS或者其他安全协议时，包含secure选项的Cookie才能被发送至服务器\")]),t._v(\"。\")]),t._v(\" \"),a(\"p\",[t._v(\"下面我们设置一个secure类型的cookie：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-javascript extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[a(\"code\",[t._v(\"     document\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"cookie \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"name=Andraw_lin; secure\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])])]),a(\"blockquote\",[a(\"p\",[t._v(\"有个坑需要注意下：\\n如果想在客户端即网页中通过js去设置secure类型的cookie，必须保证网页是https协议的。在http协议的网页中是无法设置secure类型的Cookie的。\")])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"httpOnly\")]),t._v(\" \"),a(\"p\",[t._v(\"该选项用来设置Cookie是否能通过js去访问。默认情况下，Cookie不会带httpOnly选项（即为空），所以默认情况下，客户端是可以通过js代码访问（包括读取、修改、删除等）这个Cookie的。当Cookie带httpOnly选项时，客户端无法通过js代码去访问（包括读取、修改、删除等）这个cookie。\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"在客户端是不能通过js代码去设置一个httpOnly类型的Cookie，这种类型的Cookie只能通过服务端来设置\")]),t._v(\"。\")]),t._v(\" \"),a(\"p\",[t._v(\"从上面的介绍中，大家是否会有这样的疑问：\"),a(\"strong\",[t._v(\"为什么我们要限制客户端去访问Cookie？\")])]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"原因\")]),t._v(\"：如果任何Cookie都能被客户端通过document.cookie获取，那么当我们的网页遭受了XSS的攻击，有一段而已的script脚本插到了网页中，这段script脚本做的事情是：通过document.cookie读取了用户身份验证相关的cookie，并将这些cookie发送到了攻击者的服务器。攻击者就会很容易拿到了用户身份验证信息，于是就可以大摇大摆地冒充此用户访问你的服务器了（因为攻击者有合法的用户身份验证信息，所以会通过你服务器的验证）\")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);","extractedComments":[]}